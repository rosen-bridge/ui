{
  "logs": {
    "type": "array",
    "items": {
      "type": "object",
      "children": {
        "type": {
          "type": "string",
          "description": "options: file, console, loki",
          "default": "file",
          "validations": [
            {
              "required": true,
              "error": "log type must be specified"
            },
            { "choices": ["file", "console", "loki"] }
          ]
        },
        "maxSize": {
          "type": "string",
          "default": "20m",
          "validations": [
            {
              "required": true,
              "error": "maxSize for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "maxFiles": {
          "type": "string",
          "default": "14d",
          "validations": [
            {
              "required": true,
              "error": "maxFiles for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "path": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "path for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "level": {
          "type": "string",
          "default": "info",
          "validations": [
            {
              "required": true,
              "error": "log level must be specified"
            }
          ]
        },
        "serviceName": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "Service-Name for the \"loki\" log type must be specified",
              "when": { "path": "logs.type", "value": "loki" }
            }
          ]
        },
        "host": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "host for the \"loki\" log type must be specified",
              "when": { "path": "logs.type", "value": "loki" }
            }
          ]
        },
        "basicAuth": {
          "type": "string",
          "default": ""
        }
      }
    }
  },
  "db": {
    "type": "object",
    "children": {
      "host": {
        "type": "string",
        "default": "localhost",
        "validations": [
          {
            "required": true,
            "error": "host for the \"postgres\" database address must be specified"
          }
        ]
      },
      "port": {
        "type": "number",
        "default": 5432,
        "validations": [
          {
            "required": true,
            "error": "postgres port must be set"
          }
        ]
      },
      "username": {
        "type": "string",
        "default": "postgres"
      },
      "password": {
        "type": "string",
        "default": ""
      },
      "name": {
        "type": "string",
        "default": "rosen_service",
        "validations": [
          {
            "required": true,
            "error": "postgres database name must be specified"
          }
        ]
      }
    }
  },
  "healthCheck": {
    "type": "object",
    "children": {
      "logging": {
        "type": "object",
        "children": {
          "maxErrors": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "maxErrorLogs must be specified"
              }
            ]
          },
          "maxWarns": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "maxWarns must be specified"
              }
            ]
          },
          "duration": {
            "type": "number",
            "default": 100,
            "validations": [
              {
                "required": true,
                "error": "duration must be specified (in seconds)"
              }
            ]
          }
        }
      },
      "scanner": {
        "type": "object",
        "children": {
          "warnDiff": {
            "type": "number",
            "default": 2,
            "validations": [
              {
                "required": true,
                "error": "warnDiff must be specified"
              }
            ]
          },
          "criticalDiff": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "criticalDiff must be specified"
              }
            ]
          }
        }
      },
      "notification": {
        "type": "object",
        "children": {
          "discordWebHookUrl": {
            "type": "string"
          },
          "historyCleanupTimeout": {
            "type": "number"
          },
          "hasBeenUnstableForAWhileWindowDuration": {
            "type": "number"
          },
          "hasBeenUnknownForAWhileWindowDuration": {
            "type": "number"
          }
        }
      },
      "updateInterval": {
        "type": "number",
        "default": 60,
        "validations": [
          {
            "required": true,
            "error": "notification updateInterval must be set"
          }
        ]
      }
    }
  },
  "chains": {
    "type": "object",
    "children": {
      "ergo": {
        "type": "object",
        "children": {
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "ergo initial height",
            "validations": [
              {
                "required": true,
                "error": "ergo initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "ergo scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "ergo scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "ergo blockRetrieveGap threshold in seconds"
          },
          "method": {
            "type": "string",
            "description": "ergo network connection method",
            "default": "explorer",
            "validations": [
              {
                "choices": ["explorer", "node"]
              }
            ]
          },
          "node": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "ergo node url",
                "validations": [
                  {
                    "required": true,
                    "error": "ergo node url must be specified",
                    "when": {"path": "chains.ergo.method", "value": "node"}
                  }
                ]
              }
            }
          },
          "explorer": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "default": "https://explorer.ergoplatform.com/",
                "description": "ergo explorer url",
                "validations": [
                  {
                    "required": true,
                    "error": "ergo explorer url must be specified",
                    "when": {"path": "chains.ergo.method", "value": "explorer"}
                  }
                ]
              }
            }
          }
        }
      },
      "cardano": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "cardano activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "cardano activation state must be set"
              }
            ]
          },
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "cardano initial height",
            "validations": [
              {
                "required": true,
                "error": "cardano initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "cardano scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "cardano scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "cardano blockRetrieveGap threshold in seconds"
          },
          "method": {
            "type": "string",
            "description": "cardano network connection method",
            "default": "koios",
            "validations": [
              {
                "required": true,
                "error": "cardano network connection method must be set",
                "when": {"path": "chains.cardano.active", "value": true}
              },
              {
                "choices": ["koios", "ogmios", "blockfrost"]
              }
            ]
          },
          "koios": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "cardano koios url",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano koios url must be specified (in seconds)",
                    "when": {"path": "chains.cardano.method", "value": "koios"}
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "cardano koios timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano koios timeout must be specified (in seconds)",
                    "when": {"path": "chains.cardano.method", "value": "koios"}
                  }
                ]
              },
              "authToken": {
                "type": "string",
                "description": "cardano koios authToken"
              },
              "suffix": {
                "type": "string",
                "description": "cardano koios suffix"
              }
            }
          },
          "blockfrost": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "cardano blockfrost url"
              },
              "projectId": {
                "type": "string",
                "description": "cardano blockfrost projectId",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano blockfrost projectId must be specified",
                    "when": {"path": "chains.cardano.method", "value": "blockfrost"}
                  }
                ]
              },
              "suffix": {
                "type": "string",
                "description": "cardano blockfrost suffix"
              }
            }
          },
          "ogmios": {
            "type": "object",
            "children": {
              "address": {
                "type": "string",
                "description": "cardano ogmios nodeHostOrIp",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano ogmios nodeHostOrIp must be specified",
                    "when": {"path": "chains.cardano.method", "value": "ogmios"}
                  }
                ]
              },
              "port": {
                "type": "number",
                "description": "cardano ogmios nodePort",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano ogmios nodePort must be specified",
                    "when": {"path": "chains.cardano.method", "value": "ogmios"}
                  }
                ]
              },
              "initialSlot": {
                "type": "number",
                "description": "cardano ogmios initialSlot",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano ogmios initialSlot must be specified",
                    "when": {"path": "chains.cardano.method", "value": "ogmios"}
                  }
                ]
              },
              "initialHash": {
                "type": "string",
                "description": "cardano ogmios initialHash",
                "validations": [
                  {
                    "required": true,
                    "error": "cardano ogmios initialHash must be specified",
                    "when": {"path": "chains.cardano.method", "value": "ogmios"}
                  }
                ]
              },
              "maxTryBlock": {
                "type": "number",
                "description": "cardano ogmios maxTryBlock"
              },
              "useTls": {
                "type": "boolean",
                "description": "cardano ogmios useTls"
              },
              "suffix": {
                "type": "string",
                "description": "cardano ogmios suffix"
              }
            }
          }
        }
      },
      "bitcoin": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "bitcoin activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "bitcoin activation state must be set"
              }
            ]
          },
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "bitcoin initial height",
            "validations": [
              {
                "required": true,
                "error": "bitcoin initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "bitcoin scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "bitcoin scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "bitcoin blockRetrieveGap threshold in seconds"
          },
          "method": {
            "type": "string",
            "description": "bitcoin network connection method",
            "default": "rpc",
            "validations": [
              {
                "required": true,
                "error": "bitcoin network connection method must be set",
                "when": {"path": "chains.bitcoin.active", "value": true}
              },
              {
                "choices": ["rpc", "esplora"]
              }
            ]
          },
          "rpc": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "bitcoin rpc url",
                "validations": [
                  {
                    "required": true,
                    "error": "bitcoin rpc url must be specified",
                    "when": {"path": "chains.bitcoin.method", "value": "rpc"}
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "bitcoin rpc timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "bitcoin rpc timeout must be specified (in seconds)",
                    "when": {"path": "chains.bitcoin.method", "value": "rpc"}
                  }
                ]
              },
              "username": {
                "type": "string"
              },
              "password": {
                "type": "string"
              },
              "suffix": {
                "type": "string",
                "description": "bitcoin rpc suffix"
              }
            }
          },
          "esplora": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "bitcoin esplora url",
                "validations": [
                  {
                    "required": true,
                    "error": "bitcoin esplora url must be specified",
                    "when": {"path": "chains.bitcoin.method", "value": "esplora"}
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "bitcoin esplora timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "bitcoin esplora timeout must be specified (in seconds)",
                    "when": {"path": "chains.bitcoin.method", "value": "esplora"}
                  }
                ]
              },
              "apiPrefix": {
                "type": "string"
              },
              "suffix": {
                "type": "string",
                "description": "bitcoin esplora suffix"
              }
            }
          }
        }
      },
      "doge": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "doge activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "doge activation state must be set"
              }
            ]
          },
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "doge initial height",
            "validations": [
              {
                "required": true,
                "error": "doge initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "doge scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "doge scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "doge blockRetrieveGap threshold in seconds"
          },
          "method": {
            "type": "string",
            "description": "doge network connection method",
            "default": "rpc",
            "validations": [
              {
                "required": true,
                "error": "doge network connection method must be set",
                "when": {"path": "chains.doge.active", "value": true}
              },
              {
                "choices": ["rpc", "esplora"]
              }
            ]
          },
          "rpcSuffix": {
            "type": "string",
            "description": "doge rpc suffix"
          },
          "rpc": {
            "type": "array",
            "items": {
              "type": "object",
              "children": {
                "url": {
                  "type": "string",
                  "description": "doge rpc url",
                  "validations": [
                    {
                      "required": true,
                      "error": "doge rpc url must be specified",
                      "when": {"path": "chains.doge.method", "value": "rpc"}
                    }
                  ]
                },
                "timeout": {
                  "type": "number",
                  "default": 100,
                  "description": "doge rpc timeout threshold in seconds",
                  "validations": [
                    {
                      "required": true,
                      "error": "doge rpc timeout must be specified (in seconds)",
                      "when": {"path": "chains.doge.method", "value": "rpc"}
                    }
                  ]
                },
                "username": {
                  "type": "string"
                },
                "password": {
                  "type": "string"
                }
              }
            }
          },
          "esplora": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "doge esplora url",
                "validations": [
                  {
                    "required": true,
                    "error": "doge esplora url must be specified",
                    "when": {"path": "chains.doge.method", "value": "esplora"}
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "doge esplora timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "doge esplora timeout must be specified (in seconds)",
                    "when": {"path": "chains.doge.method", "value": "esplora"}
                  }
                ]
              },
              "apiPrefix": {
                "type": "string"
              },
              "suffix": {
                "type": "string",
                "description": "doge esplora suffix"
              }
            }
          }
        }
      },
      "ethereum": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "ethereum activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "ethereum activation state must be set"
              }
            ]
          },
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "ethereum initial height",
            "validations": [
              {
                "required": true,
                "error": "ethereum initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "ethereum scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "ethereum scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "ethereum blockRetrieveGap threshold in seconds"
          },
          "rpc": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "ethereum rpc url",
                "validations": [
                  {
                    "required": true,
                    "error": "ethereum rpc url must be specified"
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "ethereum rpc timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "ethereum rpc timeout must be specified (in seconds)"
                  }
                ]
              },
              "authToken": {
                "type": "string",
                "description": "ethereum rpc authToken"
              },
              "suffix": {
                "type": "string",
                "description": "ethereum rpc suffix"
              }
            }
          }
        }
      },
      "binance": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "binance activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "binance activation state must be set"
              }
            ]
          },
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "binance initial height",
            "validations": [
              {
                "required": true,
                "error": "binance initial height must be specified"
              }
            ]
          },
          "scanInterval": {
            "type": "number",
            "default": 60,
            "description": "binance scanInterval threshold in seconds",
            "validations": [
              {
                "required": true,
                "error": "binance scanInterval must be specified (in seconds)"
              }
            ]
          },
          "blockRetrieveGap": {
            "type": "number",
            "description": "binance blockRetrieveGap threshold in seconds"
          },
          "rpc": {
            "type": "object",
            "children": {
              "url": {
                "type": "string",
                "description": "binance rpc url",
                "validations": [
                  {
                    "required": true,
                    "error": "binance rpc url must be specified"
                  }
                ]
              },
              "timeout": {
                "type": "number",
                "default": 100,
                "description": "binance rpc timeout threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "binance rpc timeout must be specified (in seconds)"
                  }
                ]
              },
              "authToken": {
                "type": "string"
              },
              "suffix": {
                "type": "string",
                "description": "binance rpc suffix"
              }
            }
          }
        }
      },
      "runes": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "runes activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "runes activation state must be set"
              }
            ]
          }
        }
      }
    }
  },
  "paths": {
    "type": "object",
    "children": {
      "tokens": {
        "type": "string",
        "default": "config/rosen/tokensMap.json",
        "validations": [
          {
            "required": true,
            "error": "path for the tokens file must be set"
          }
        ]
      },
      "contracts": {
        "type": "string",
        "default": "config/rosen",
        "validations": [
          {
            "required": true,
            "error": "path for the contracts file must be set"
          }
        ]
      }
    }
  }
}
