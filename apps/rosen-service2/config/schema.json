{
  "logs": {
    "type": "array",
    "items": {
      "type": "object",
      "children": {
        "type": {
          "type": "string",
          "description": "options: file, console, loki",
          "default": "file",
          "validations": [
            {
              "required": true,
              "error": "log type must be specified"
            },
            { "choices": ["file", "console", "loki"] }
          ]
        },
        "maxSize": {
          "type": "string",
          "default": "20m",
          "validations": [
            {
              "required": true,
              "error": "maxSize for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "maxFiles": {
          "type": "string",
          "default": "14d",
          "validations": [
            {
              "required": true,
              "error": "maxFiles for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "path": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "path for file log type must be specified",
              "when": { "path": "logs.type", "value": "file" }
            }
          ]
        },
        "level": {
          "type": "string",
          "default": "info",
          "validations": [
            {
              "required": true,
              "error": "log level must be specified"
            }
          ]
        },
        "serviceName": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "Service-Name for the \"loki\" log type must be specified",
              "when": { "path": "logs.type", "value": "loki" }
            }
          ]
        },
        "host": {
          "type": "string",
          "validations": [
            {
              "required": true,
              "error": "host for the \"loki\" log type must be specified",
              "when": { "path": "logs.type", "value": "loki" }
            }
          ]
        },
        "basicAuth": {
          "type": "string",
          "default": ""
        }
      }
    }
  },
  "db": {
    "type": "object",
    "children": {
      "host": {
        "type": "string",
        "default": "localhost",
        "validations": [
          {
            "required": true,
            "error": "host for the \"postgres\" database address must be specified"
          }
        ]
      },
      "port": {
        "type": "number",
        "default": 5432,
        "validations": [
          {
            "required": true,
            "error": "postgres port must be set"
          }
        ]
      },
      "username": {
        "type": "string",
        "default": "postgres"
      },
      "password": {
        "type": "string",
        "default": ""
      },
      "name": {
        "type": "string",
        "default": "rosen_service",
        "validations": [
          {
            "required": true,
            "error": "postgres database name must be set"
          }
        ]
      }
    }
  },
  "healthCheck": {
    "type": "object",
    "children": {
      "logging": {
        "type": "object",
        "children": {
          "maxErrors": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "maxErrorLogs must be specified"
              }
            ]
          },
          "maxWarns": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "maxWarns must be specified"
              }
            ]
          },
          "duration": {
            "type": "number",
            "default": 100,
            "validations": [
              {
                "required": true,
                "error": "duration must be specified (in seconds)"
              }
            ]
          }
        }
      },
      "scanner": {
        "type": "object",
        "children": {
          "warnDiff": {
            "type": "number",
            "default": 2,
            "validations": [
              {
                "required": true,
                "error": "warnDiff must be specified"
              }
            ]
          },
          "criticalDiff": {
            "type": "number",
            "default": 10,
            "validations": [
              {
                "required": true,
                "error": "criticalDiff must be specified"
              }
            ]
          }
        }
      },
      "notification": {
        "type": "object",
        "children": {
          "discordWebHookUrl": {
            "type": "string"
          },
          "historyCleanupTimeout": {
            "type": "number"
          },
          "hasBeenUnstableForAWhileWindowDuration": {
            "type": "number"
          },
          "hasBeenUnknownForAWhileWindowDuration": {
            "type": "number"
          }
        }
      },
      "updateInterval": {
        "type": "number",
        "default": 60,
        "validations": [
          {
            "required": true,
            "error": "notification updateInterval must be set"
          }
        ]
      }
    }
  },
  "chains": {
    "type": "object",
    "children": {
      "ergo": {
        "type": "object",
        "children": {
          "initialHeight": {
            "type": "number",
            "default": 1,
            "description": "ergo initial height",
            "validations": [
              {
                "required": true,
                "error": "ergo initial height must be set"
              }
            ]
          },
          "node": {
            "type": "object",
            "children": {
              "blockRetrieveGap": {
                "type": "number",
                "default": 0,
                "description": "ergo node blockRetrieveGap threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "ergo node blockRetrieveGap must be set (in seconds)"
                  }
                ]
              },
              "scanInterval": {
                "type": "number",
                "default": 60,
                "description": "ergo node scanInterval threshold in seconds",
                "validations": [
                  {
                    "required": true,
                    "error": "ergo node scanInterval must be set (in seconds)"
                  }
                ]
              },
              "url": {
                "type": "string",
                "description": "ergo node url",
                "validations": [
                  {
                    "required": true,
                    "error": "ergo node url must be set"
                  }
                ]
              }
            }
          }
        }
      },
      "cardano": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "cardano activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "cardano activation state must be set"
              }
            ]
          }
        }
      },
      "bitcoin": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "bitcoin activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "bitcoin activation state must be set"
              }
            ]
          }
        }
      },
      "doge": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "doge activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "doge activation state must be set"
              }
            ]
          }
        }
      },
      "ethereum": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "ethereum activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "ethereum activation state must be set"
              }
            ]
          }
        }
      },
      "binance": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "binance activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "binance activation state must be set"
              }
            ]
          }
        }
      },
      "bitcoinRunes": {
        "type": "object",
        "children": {
          "active": {
            "type": "boolean",
            "description": "bitcoin-runes activation state",
            "default": false,
            "validations": [
              {
                "required": true,
                "error": "bitcoin-runes activation state must be set"
              }
            ]
          }
        }
      }
    }
  },
  "paths": {
    "type": "object",
    "children": {
      "tokens": {
        "type": "string",
        "default": "config/rosen/tokensMap.json",
        "validations": [
          {
            "required": true,
            "error": "path for the tokens file must be set"
          }
        ]
      },
      "contracts": {
        "type": "string",
        "default": "config/rosen",
        "validations": [
          {
            "required": true,
            "error": "path for the contracts file must be set"
          }
        ]
      }
    }
  }
}
